<style>
h2 {border: 5px groove black;
    padding: 0em 1em;
    border-radius: 16px;
    line-height: 2;
    box-shadow: 7px 10px gray;
}

</style>
<h2 style="text-align:center;font-size:60px;;background-color:darkblue;color:white;font-family:andalus;">jj06-Squeezenet-Von</h1>

<!--   In the Github repository will be old  
    <script src="deeplearn.js"></script>
 -->


<!-- the newest version but all examples may not work 
<script src="https://unpkg.com/deeplearn"></script> 
-->

  
<!-- the online version that these examples were made with  SEEMS TO NEED VERSION 0.3.13   -->

<script src="https://unpkg.com/deeplearn@0.3.13/dist/deeplearn.js"></script>


<div id="myDiv01Code">

<script src="https://unpkg.com/deeplearn-squeezenet@0.1.2/dist/bundle.js"></script>
    
<h2 align="center"> <a href="https://deeplearnjs.org/demos/playground/examples.html">SqueezeNet and DeeplearnJS Playground</a></h2>

        

   
<script>

async function myCheckImage(){
  dl = deeplearn
  const catImage = document.getElementById('cat');
  const math = new dl.NDArrayMathGPU();
  const squeezeNet = new squeezenet.SqueezeNet(math);
  await squeezeNet.load();

  const image = dl.Array3D.fromPixels(document.getElementById('cat'));
  const inferenceResult = await squeezeNet.predict(image);
  const topClassesToProbs = await squeezeNet.getTopKClasses(inferenceResult.logits, 10);

  document.getElementById('myDiv01').innerHTML = ''   // clear the div
  for (const className in topClassesToProbs) {  
    document.getElementById('myDiv01').innerHTML += topClassesToProbs[className].toFixed(5) + ' : '+ className + '<br>'
  }
}


async function myLoadImage(myEvent){
    myEvent.preventDefault(); 
    myEvent.stopPropagation();   
    document.getElementById('cat').src = await window.URL.createObjectURL(myEvent.dataTransfer.files[0]); 
    setTimeout('myCheckImage()', 200)
}


</script>


Save an image of an animal to a folder and then drag the image on top of the loaded image.  <br> 



  <img onload="myCheckImage()" id="cat" src="https://storage.googleapis.com/learnjs-data/images/cat.jpeg" width="227" height="227" crossorigin="" ondrop="{ 
     myLoadImage(event)
  }" ondragover="{
    event.preventDefault(); 
    event.stopPropagation();
    event.dataTransfer.dropEffect = 'copy';
    document.getElementById('myDiv01').innerHTML = 'drag over'
  }"><br><br>



<input type="button" value="Reset Output DIV" onclick="{
   document.getElementById('myDiv01').innerHTML = '...'                                             
}">

<input type="button" value="Search SqueezeNet" onclick="{
     myCheckImage()                                     
}"><br><br>
    
<div id="myDiv01">...</div><br>                 
</div>
    
<textarea id="myTextarea01" style="color:blue; background-color:lightyellow; white-space:nowrap; width:100%" rows="3" onclick="{
   myTextGrow('myTextarea01', 'myDiv01Code')
}">Click the button "Reset Output DIV" then click here to see the original code
</textarea>

<br><br><hr><br>


<script>
function myTextGrow(myT, myB){
   document.getElementById(myT).value = '\x3Cscript src="https://unpkg.com/deeplearn@0.3.13/dist/deeplearn.js"> \x3C/script> \n\n' + document.getElementById(myB).innerHTML 
        
   setTimeout(function() {
      while (  document.getElementById(myT).clientHeight < document.getElementById(myT).scrollHeight){                                                                                                                                              
          document.getElementById(myT).rows += 3; 
      } 
   }, 100)
}  
</script>  
</body></html>


